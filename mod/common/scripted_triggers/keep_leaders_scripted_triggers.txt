# THIS = country
is_devouring_hive_empire = {
	is_hive_empire = yes
	has_valid_civic = civic_hive_devouring_swarm
}

# THIS = country
is_regular_hive_empire = {
	is_hive_empire = yes
	NOT = { has_valid_civic = civic_hive_devouring_swarm }
}

# THIS = country
empire_considers_cyborgs_machines = {
	OR = {
		has_valid_civic = civic_machine_assimilator
		has_ascension_perk = ap_the_flesh_is_weak
		has_country_flag = flesh_weakened
		has_ascension_perk = ap_synthetic_evolution
		has_country_flag = synthetic_empire
	}
}

# THIS = country
has_full_ai_rights = {
	OR = {
		has_authority = auth_machine_intelligence
		has_country_flag = synthetic_empire
		AND = {
			has_policy_flag = robots_allowed
			has_policy_flag = ai_full_rights
		}
	}
}

# THIS = something with a species
# event_target:root_country = country to check
can_be_civilian_leaders_species = {
	species = {
		OR = {
			has_citizenship_type = {
				country = event_target:root_country
				type = citizenship_full
			}
			has_citizenship_type = {
				country = event_target:root_country
				type = citizenship_full_machine
			}
		}
	}
}

# THIS = something with a species
# event_target:root_country = country to check
can_be_military_leaders_species = {
	species = {
		has_military_service_type = {
			country = event_target:root_country
			type = military_service_full
		}
	}
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_policy_full_citizenship_species = {
	species = {
		OR = {
			is_same_species = event_target:root_country
			if = {
				limit = { event_target:root_country = { is_machine_empire = yes } }
				if = {
					limit = { event_target:root_country = { has_valid_civic = civic_machine_assimilator } }
					OR = {
						is_archetype = MACHINE
						has_trait = trait_machine_unit
						is_archetype = ROBOT
						has_trait = trait_mechanical
						has_trait = trait_cybernetic
					}
				}
				else = {
					OR = {
						is_archetype = MACHINE
						has_trait = trait_machine_unit
						is_archetype = ROBOT
						has_trait = trait_mechanical
					}
				}
			}
			else_if = {
				limit = {
					event_target:root_country = { is_regular_hive_empire = yes }
				}
				OR = {
					PREV = { has_trait = trait_hive_mind }
					event_target:root_country = { has_ascension_perk = ap_evolutionary_mastery }
				}
			}
			else_if = {
				limit = {
					event_target:root_country = {
						is_regular_empire = yes
						NOT = { has_valid_civic = civic_fanatic_purifiers }
						is_xenophobe = no
						NAND = {
							has_origin = origin_necrophage
							has_trait = trait_necrophage
						}
					}
				}
				NOR = {
					has_trait = trait_nerve_stapled
					has_trait = trait_syncretic_proles
					is_sapient = no
				}
				OR = {
					NOR = {
						is_archetype = ROBOT
						has_trait = trait_mechanical
						is_archetype = MACHINE
						has_trait = trait_machine_unit
					}
					AND = {
						is_archetype = ROBOT
						has_trait = trait_mechanical
						event_target:root_country = { has_full_ai_rights = yes }
					}
					AND = {
						is_archetype = MACHINE
						has_trait = trait_machine_unit
						event_target:root_country = { is_mechanical_empire = yes }
					}
				}
			}
			else = {
				always = no
			}
		}
	}
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_policy_full_military_service_species = {
	species = {
		OR = {
			is_same_species = event_target:root_country
			if = {
				limit = { event_target:root_country = { is_machine_empire = yes } }
				if = {
					limit = { event_target:root_country = { has_valid_civic = civic_machine_assimilator } }
					OR = {
						is_archetype = MACHINE
						has_trait = trait_machine_unit
						is_archetype = ROBOT
						has_trait = trait_mechanical
						has_trait = trait_cybernetic
					}
				}
				else = {
					OR = {
						is_archetype = MACHINE
						has_trait = trait_machine_unit
						is_archetype = ROBOT
						has_trait = trait_mechanical
					}
				}
			}
			else_if = {
				limit = {
					event_target:root_country = { is_regular_hive_empire = yes }
					OR = {
						PREV = { has_trait = trait_hive_mind }
						event_target:root_country = { has_ascension_perk = ap_evolutionary_mastery }
					}
				}
			}
			else_if = {
				limit = {
					event_target:root_country = {
						is_regular_empire = yes
						NOT = { has_valid_civic = civic_fanatic_purifiers }
						OR = {
							is_xenophobe = no
							PREV = { has_species_flag = allow_military_leaders_for_xenophobe }
						}
						OR = {
							NAND = {
								has_origin = origin_necrophage
								has_trait = trait_necrophage
							}
							PREV = { has_species_flag = allow_military_leaders_for_necrophage }
						}
					}
				}
				NOR = {
					has_trait = trait_nerve_stapled
					has_trait = trait_syncretic_proles
					is_sapient = no
				}
				OR = {
					NOR = {
						is_archetype = ROBOT
						has_trait = trait_mechanical
						is_archetype = MACHINE
						has_trait = trait_machine_unit
					}
					AND = {
						is_archetype = ROBOT
						has_trait = trait_mechanical
						event_target:root_country = { has_full_ai_rights = yes }
					}
					AND = {
						is_archetype = MACHINE
						has_trait = trait_machine_unit
						event_target:root_country = { is_mechanical_empire = yes }
					}
				}
			}
			else = {
				always = no
			}
		}
	}
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_machine_assimilation_species = {
	is_organic_species = yes
	is_cyborg_species = no
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_hive_assimilation_species = {
	is_organic_species = yes
	is_hive_species = no
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_synthetic_assimilation_species = {
	is_organic_species = yes
	is_hive_species = no
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_cybernetic_assimilation_species = {
	is_organic_species = yes
	is_cyborg_species = no
	is_hive_species = no
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_psionic_assimilation_species = {
	is_organic_species = yes
	is_cyborg_species = no
	is_psionic_species = no
	is_hive_species = no
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_unhive_assimilation_species = {
	is_organic_species = yes
	is_hive_species = yes
}

# THIS = something with a species
# event_target:root_country = country to check
is_eligible_for_assimilation_species = {
	is_organic_species = yes
	species = {
		if = {
			limit = {
				has_synthethic_dawn = yes
				event_target:root_country = { has_valid_civic = civic_machine_assimilator }
			}
			NOT = { has_trait = trait_cybernetic }
		}
		else_if = {
			limit = {
				has_utopia = yes
				event_target:root_country = {
					is_regular_hive_empire = yes
					has_ascension_perk = ap_evolutionary_mastery
				}
			}
			NOT = { has_trait = trait_hive_mind }
		}
		else_if = {
			limit = {
				has_utopia = yes
				event_target:root_country = {
					is_regular_empire = yes
					OR = {
						NOT = { has_valid_civic = civic_fanatic_purifiers }
						AND = {
							is_same_species = PREV
							NOT = { is_exact_same_species = PREV }
						}
					}
				}
			}
			OR = {
				AND = {
					event_target:root_country = { has_ascension_perk = ap_transcendence }
					NOR = {
						has_trait = trait_cybernetic
						has_trait = trait_psionic
					}
				}
				AND = {
					event_target:root_country = { has_ascension_perk = ap_evolutionary_mastery }
					has_trait = trait_hive_mind
				}
				AND = {
					event_target:root_country = {
						has_ascension_perk = ap_the_flesh_is_weak
						OR = {
							has_country_flag = flesh_weakened
							has_country_flag = synthetic_empire
						}
					}
					NOT = { has_trait = trait_hive_mind }
				}
			}
		}
		else = {
			always = no
		}
	}
}

# THIS = something with a species
is_psionic_species = {
	species = { has_trait = trait_psionic }
}

# THIS = something with a species
is_cyborg_species = {
	species = { has_trait = trait_cybernetic }
}

# THIS = something with a species
is_hive_species = {
	species = { has_trait = trait_hive_mind }
}

# THIS = leader
is_civilian_leader = {
	OR = {
		leader_class = governor
		leader_class = scientist
	}
}

# THIS = leader
is_military_leader = {
	OR = {
		leader_class = admiral
		leader_class = general
	}
}

# THIS = leader
is_psionic_leader = {
	OR = {
		is_psionic_species = yes
		if = {
			limit = { leader_class = ruler }
			OR = {
				has_trait = leader_trait_ruler_psionic
				has_trait = leader_trait_ruler_chosen
			}
		}
		else_if = {
			limit = { leader_class = governor }
			OR = {
				has_trait = leader_trait_governor_psionic
				has_trait = leader_trait_governor_chosen
			}
		}
		else_if = {
			limit = { leader_class = scientist }
			OR = {
				has_trait = leader_trait_scientist_psionic
				has_trait = leader_trait_scientist_chosen
			}
		}
		else_if = {
			limit = { leader_class = admiral }
			OR = {
				has_trait = leader_trait_admiral_psionic
				has_trait = leader_trait_admiral_chosen
			}
		}
		else_if = {
			limit = { leader_class = general }
			OR = {
				has_trait = leader_trait_general_psionic
				has_trait = leader_trait_general_chosen
			}
		}
		else = {
			always = no
		}
	}
}

# THIS = leader
is_cyborg_leader = {
	OR = {
		is_cyborg_species = yes
		if = {
			limit = { leader_class = ruler }
			has_trait = leader_trait_ruler_cyborg
		}
		else_if = {
			limit = { leader_class = governor }
			has_trait = leader_trait_governor_cyborg
		}
		else_if = {
			limit = { leader_class = scientist }
			has_trait = leader_trait_scientist_cyborg
		}
		else_if = {
			limit = { leader_class = admiral }
			has_trait = leader_trait_admiral_cyborg
		}
		else_if = {
			limit = { leader_class = general }
			has_trait = leader_trait_general_cyborg
		}
		else = {
			always = no
		}
	}
}

# THIS = leader
is_synthetic_leader = {
	if = {
		limit = { leader_class = ruler }
		has_trait = leader_trait_ruler_synthetic
	}
	else_if = {
		limit = { leader_class = governor }
		has_trait = leader_trait_governor_synthetic
	}
	else_if = {
		limit = { leader_class = scientist }
		has_trait = leader_trait_scientist_synthetic
	}
	else_if = {
		limit = { leader_class = admiral }
		has_trait = leader_trait_admiral_synthetic
	}
	else_if = {
		limit = { leader_class = general }
		has_trait = leader_trait_general_synthetic
	}
	else = {
		always = no
	}
}

# THIS = leader
is_eligible_class_for_transfer_leader = {
	NOR = {
		leader_class = ruler
		leader_class = envoy
	}
}