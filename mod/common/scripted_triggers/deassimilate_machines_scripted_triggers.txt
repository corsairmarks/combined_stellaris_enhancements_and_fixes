# this = country
has_ai_and_knows_machines = {
	optimize_memory
	OR = {
		is_mechanical_empire = yes
		has_technology = tech_sapient_ai
		has_technology = tech_combat_computers_3
		has_technology = tech_synthetic_workers
	}
	any_relation = {
		has_communications = prev
		is_robot_empire = yes
	}
}

# check whether the species qualifies for synthetic assimilation
# this = species (current)
# prev = country (assimilator)
is_eligible_for_assimilation_synthetic_species = {
	optimize_memory
	has_living_standard = {
		type = living_standard_tech_assimilation
		country = prev
	}
}

# check whether the species qualifies for machine deassimilation
# this = species (current)
# prev = country (assimilator)
is_eligible_for_assimilation_unmachine_species = {
	optimize_memory
	has_living_standard = {
		type = living_standard_deassimilation_machine
		country = prev
	}
}

# set up a species for cybernetic assimilation (non-hive)
# this = species (current)
# prev = country (assimilator)
is_eligible_for_assimilation_cybernetic_species = {
	optimize_memory
	OR = {
		AND = {
			prev = { is_machine_empire = yes }
			OR = {
				has_living_standard = {
					type = living_standard_cyborg_ego_assimilation
					country = prev
				}
				has_living_standard = {
					type = living_standard_cyborg_ego_assimilation_psionic
					country = prev
				}
			}
		}
		AND = {
			prev = { is_gestalt = no }
			OR = {
				has_living_standard = {
					type = living_standard_cyborg_assimilation
					country = prev
				}
				has_living_standard = {
					type = living_standard_cyborg_assimilation_psionic
					country = prev
				}
			}
		}
	}
}

# set up a species for hive assimilation
# this = species (current)
# prev = country (assimilator)
is_eligible_for_assimilation_hive_species = {
	optimize_memory
	OR = {
		has_living_standard = {
			type = living_standard_ego_assimilation
			country = prev
		}
		has_living_standard = {
			type = living_standard_ego_assimilation_psionic
			country = prev
		}
	}
}

# set up a species for cybernetic assimilation (hive)
# this = species (current)
# prev = country (assimilator)
is_eligible_for_assimilation_hive_cybernetic_species = {
	optimize_memory
	prev = { is_hive_empire = yes }
	OR = {
		has_living_standard = {
			type = living_standard_cyborg_ego_assimilation
			country = prev
		}
		has_living_standard = {
			type = living_standard_cyborg_ego_assimilation_psionic
			country = prev
		}
	}
}

# set up a species for hive deassimilation
# this = species (current)
# prev = country (assimilator)
is_eligible_for_assimilation_unhive_species = {
	optimize_memory
	has_living_standard = {
		type = living_standard_deassimilation
		country = prev
	}
	OR = {
		is_same_species = prev.owner_main_species
		prev = { is_homicidal = no }
	}
}

# set up a species for psionic assimilation
# this = species (current)
# prev = country (assimilator)
is_eligible_for_assimilation_psionic_species = {
	optimize_memory
	OR = {
		has_living_standard = {
			type = living_standard_psi_assimilation
			country = prev
		}
		has_living_standard = {
			type = living_standard_psi_assimilation_cyborg
			country = prev
		}
	}
}

# this = species
dm_is_species_smart_enough_for_leadership = {
	optimize_memory
	is_sapient = yes
	NOT = { has_trait = trait_syncretic_proles }
	can_think = yes
}

# this = country
dm_is_necrophage_empire = {
	optimize_memory
	has_origin = origin_necrophage
	has_trait = trait_necrophage
}