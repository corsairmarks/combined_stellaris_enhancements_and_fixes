# THIS = species
# event_target:protected_country = country, who is designating this species as protectors
set_species_honored_protector = {
	if = {
		limit = {
			has_citizenship_type = {
				type = citizenship_slavery
				country = event_target:protected_country
			}
			has_slavery_type = {
				type = slavery_military
				country = event_target:protected_country
			}
			event_target:protected_country = {
				OR = {
					AND = {
						has_origin = origin_necrophage
						has_trait = trait_necrophage
					}
					is_xenophobe = yes
				}
			}
		}
		set_species_flag = allow_military_leaders_honored_protectors@event_target:protected_country
		if = {
			limit = {
				NOT = {
					has_military_service_type = {
						type = military_service_full
						country = event_target:protected_country
					}
				}
			}
			set_military_service_type = {
				type = military_service_full
				country = event_target:protected_country
				cooldown = yes
			}
		}
	}
}

# THIS = species
accumulate_potential_protector = {
	remove_species_flag = potential_protector@PREV
	PREV = {
		change_variable = {
			which = num_subset_potential_protectors
			value = 1
		}
		change_variable = {
			which = num_potential_protectors
			value = -1
		}
	}
}