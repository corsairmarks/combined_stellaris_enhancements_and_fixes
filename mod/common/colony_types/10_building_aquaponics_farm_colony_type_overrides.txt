# Habitat Farming
# Modified: Add aquaponics farm build speed, any type of hydroponics or aquaponics increases weight factor
col_habitat_farming = {
	icon = GFX_colony_type_habitat_farming

	potential = {
		uses_district_set = habitat
		exists = owner
		owner = {
			is_gestalt = no
		}
	}
	custom_tooltip = col_habitat_farming_custom
	planet_modifier = {
		planet_building_hydroponics_farm_build_speed_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_aquaponics }
		}
		modifier = {
			planet_building_aquaponics_farm_build_speed_mult = 0.25
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_aquaponics_2 }
		}
		modifier = {
			planet_building_aquaponics_farm_2_build_speed_mult = 0.25
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}

	weight_modifier = {
		base = 300
		modifier = {
			factor = 2
			owner = { has_monthly_income = { resource = food value < 0 } }
		}
		modifier = {
			factor = 3
			has_designation = col_habitat_farming
		}
		modifier = {
			factor = 3
			OR = {
				num_buildings = {
					type = building_hydroponics_farm
					value > 0
				}
				num_buildings = {
					type = building_aquaponics_farm
					value > 0
				}
				num_buildings = {
					type = building_aquaponics_farm_2
					value > 0
				}
			}
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				nor = {
					has_sector_focus = "production"
					has_sector_focus = "balanced"
				}
			}
		}
	}
}

# Modified: Add aquaponics farm build speed, any type of hydroponics or aquaponics increases weight factor
col_habitat_gestalt_farming = {
	icon = GFX_colony_type_habitat_farming

	potential = {
		uses_district_set = habitat
		exists = owner
		owner = {
			is_gestalt = yes
		}
	}
	custom_tooltip = col_habitat_farming_gestalt_custom
	planet_modifier = {
		planet_building_hydroponics_farm_build_speed_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_aquaponics }
		}
		modifier = {
			planet_building_aquaponics_farm_build_speed_mult = 0.25
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_aquaponics_2 }
		}
		modifier = {
			planet_building_aquaponics_farm_2_build_speed_mult = 0.25
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		base = 300
		modifier = {
			factor = 2
			owner = { has_monthly_income = { resource = food value < 0 } }
		}
		modifier = {
			factor = 3
			has_designation = col_habitat_gestalt_farming
		}
		modifier = {
			factor = 3
			OR = {
				num_buildings = {
					type = building_hydroponics_farm
					value > 0
				}
				num_buildings = {
					type = building_aquaponics_farm
					value > 0
				}
				num_buildings = {
					type = building_aquaponics_farm_2
					value > 0
				}
			}
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				nor = {
					has_sector_focus = "production"
					has_sector_focus = "balanced"
				}
			}
		}
	}
}